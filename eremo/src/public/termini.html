<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="images/logo.png" type="image/x-icon" />
    <title>Termini e Condizioni - Eremo Frate Francesco</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="navbar-container" id="navbarContainer">
        <nav class="navbar">
            <div class="logo">
                <a href="index.html"><span class="emoji">üèîÔ∏è</span><h2>Eremo Frate Francesco</h2></a>
            </div>
            <div class="menu">
                <a href="eventiincorso.html">Calendario attivit√†</a>
                <a href="eventipassati.html">Archivio attivit√†</a><span class="separator">|</span>
                <a href="incontrisullaparola.html">Incontri sulla parola</a><span class="separator">|</span>
                <a href="dovesiamo.html">Dove siamo</a>
                <a href="contatti.html">Contatti</a>
            </div>
            <div class="right-menu">
                <button id="login-btn" class="login-btn">Accedi</button>
                <button class="hamburger" onclick="toggleMobileMenu()" aria-label="Toggle menu">‚ò∞</button>
            </div>
        </nav>
        <div class="mobile-menu" id="mobileMenu">
            <a href="eventiincorso.html" onclick="closeMobileMenu()">Calendario attivit√†</a>
            <a href="eventipassati.html" onclick="closeMobileMenu()">Archivio attivit√†</a>
            <a href="incontrisullaparola.html" onclick="closeMobileMenu()">Incontri sulla parola</a>
            <a href="dovesiamo.html" onclick="openLoginPopup(); closeMobileMenu();">Accedi</a>
        </div>
    </header>
    <main>
        <div class="container section-padding pb-0">
            <h1>Termini e Condizioni</h1>
        </div>

        <div class="container section-padding pt-0 text-content-centered">
            <h2>Premessa</h2>
            <p>Benvenuti sul sito dell'Eremo Frate Francesco e grazie per il vostro interesse a partecipare 
                ai nostri eventi di preghiera, meditazione e dialogo. La partecipazione alle nostre attivit√† 
                implica l'accettazione dei seguenti termini e condizioni. Vi preghiamo di leggerli attentamente.</p>
            
            <h2>Responsabilit√† dei Contenuti Generati dagli Utenti</h2>
            <p>Gli utenti sono gli unici responsabili dei contenuti che pubblicano, caricano o condividono 
                attraverso i nostri canali, inclusi, a titolo esemplificativo ma non esaustivo, commenti, 
                messaggi e materiali multimediali. L'Eremo Frate Francesco non si assume alcuna responsabilit√†
                 per la veridicit√†, l'accuratezza o la legalit√† di tali contenuti. Ci riserviamo il diritto di 
                 rimuovere qualsiasi contenuto che riteniamo inappropriato, offensivo, diffamatorio, illegale 
                 o che violi i presenti termini e condizioni, senza alcun preavviso.</p>

            <h2>Consenso all'Apparizione in Materiale Fotografico e Video</h2>
            <p>Partecipando agli eventi organizzati dall'Eremo Frate Francesco, accettate e acconsentite 
                che la vostra immagine e/o voce possano essere riprese in fotografie, video e registrazioni
                 audio realizzate durante l'evento. Questo materiale potr√† essere utilizzato dall'Eremo Frate
                  Francesco per scopi promozionali, divulgativi e di archivio, inclusa la pubblicazione sul 
                  nostro sito web, sui social media e su altri canali di comunicazione, senza alcun compenso
                   o pretesa da parte vostra. Se non desiderate essere ripresi, siete pregati di comunicarlo
                    esplicitamente allo staff dell'Eremo prima dell'inizio dell'evento o di posizionarvi in 
                    aree non facilmente riprendibili.</p>

            <h2>Responsabilit√† per Oggetti Personali</h2>
            <p>L'Eremo Frate Francesco non √® responsabile per la perdita, il danneggiamento o il furto di beni
                 personali o materiali che portate con voi durante la partecipazione ai nostri eventi. 
                 Vi invitiamo a custodire con la massima attenzione i vostri effetti personali e a non lasciare
                  oggetti di valore incustoditi.</p>

            <h2>Aggiornamenti ai Termini e Condizioni</h2>
            <p>Ci riserviamo il diritto di aggiornare o modificare questi Termini e Condizioni in qualsiasi 
                momento. Eventuali modifiche saranno pubblicate su questa pagina e la data dell'ultimo 
                aggiornamento sar√† chiaramente indicata. √à vostra responsabilit√† verificare periodicamente 
                questi termini. La vostra continua partecipazione ai nostri eventi o l'utilizzo del nostro 
                sito dopo la pubblicazione delle modifiche costituir√† accettazione delle stesse.</p>

            <h2>Condotta durante gli Eventi</h2>
            <p>Per garantire un ambiente sereno e rispettoso, chiediamo a tutti i partecipanti di mantenere 
                un comportamento adeguato e consono alla natura degli eventi di preghiera, meditazione e 
                dialogo. Comportamenti irrispettosi, molesti o che disturbano l'armonia dell'evento non saranno
                 tollerati e potranno comportare l'allontanamento dall'evento.</p>

            <h2>Privacy Policy</h2>
            <p>Per informazioni relative alla raccolta, utilizzo e protezione dei vostri dati personali, 
                vi invitiamo a consultare la nostra <a href="privacy.html" target="_blank">Privacy Policy</a>. La nostra Privacy Policy 
                √® parte integrante dei presenti Termini e Condizioni.</p>

            <h2>Limitazione di Responsabilit√†</h2>
            <p>L'Eremo Frate Francesco si impegna a fornire un ambiente sicuro e stimolante per gli eventi. 
                Tuttavia, non ci assumiamo alcuna responsabilit√† per eventuali danni diretti, indiretti, 
                incidentali, speciali o consequenziali derivanti dalla vostra partecipazione agli eventi o 
                dall'utilizzo del nostro sito.</p>

        </div>
    </main>

    <div class="login-popup-overlay" id="loginOverlay"></div>
    <div class="login-popup" id="loginPopup">
        <button class="close-popup" id="closePopup" aria-label="Chiudi popup">&times;</button>
        <div class="login-tabs">
            <div class="login-tab active" data-tab="login">Accedi</div>
            <div class="login-tab" data-tab="register">Registrati</div>
        </div>
        <form class="login-form active" id="loginForm" method="POST"> <div class="form-group mb-3">
            <label for="login-email">Email</label>
            <input type="email" id="login-email" name="login-email" class="form-control" required autocomplete="email"> </div>
            <div class="form-group mb-3">
                <label for="login-password">Password</label>
                <input type="password" id="login-password" name="login-password" class="form-control" required autocomplete="current-password"> </div>
            <div class="form-actions">
                <button type="submit" class="btn-popup">Accedi</button>
            </div>
        </form>
        <form class="login-form" id="registerForm" method="POST">
            <div class="form-group mb-3">
                <label for="register-name">Nome</label>
                <input type="text" id="register-name" name="register-name" class="form-control" required autocomplete="given-name"> </div>
            <div class="form-group mb-3">
                <label for="register-surname">Cognome</label>
                <input type="text" id="register-surname" name="register-surname" class="form-control" required autocomplete="family-name"> </div>
            <div class="form-group mb-3">
                <label for="register-email">Email</label>
                <input type="email" id="register-email" name="register-email" class="form-control" required autocomplete="email"> </div>
            <div class="form-group mb-3">
                <label for="register-password">Password</label>
                <input type="password" id="register-password" name="register-password" class="form-control" required minlength="8" autocomplete="new-password"> <small>Minimo 8 caratteri.</small>
            </div>
            <div class="terms-checkbox mb-3">
                <input type="checkbox" id="register-terms" name="register-terms" required> <label for="register-terms">Accetto i <a href="termini.html" target="_blank">termini e condizioni</a></label>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-popup">Registrati</button>
            </div>
        </form>
    </div>

    <footer>
        <p>¬© <span id="currentYear"></span> Eremo Frate Francesco. Tutti i diritti riservati. Via della Spiritualit√† 123, Nembro (BG) - Italia</p>
    </footer>

    <script src="js/script.js"></script>
    <script src="js/login.js"></script>
    <script>

  // --- Navbar Scroll Logic ---
  let lastScroll = 0;
  const navbarContainer = document.getElementById("navbarContainer");
  if (navbarContainer) { // Aggiunto controllo
    window.addEventListener(
            "scroll",
            function () {
              const currentScroll =
                      window.pageYOffset || document.documentElement.scrollTop;
              if (currentScroll <= 50) {
                navbarContainer.classList.remove("hidden");
                lastScroll = 0;
                return;
              }
              if (
                      currentScroll > lastScroll &&
                      !navbarContainer.classList.contains("hidden")
              ) {
                navbarContainer.classList.add("hidden");
              } else if (
                      currentScroll < lastScroll &&
                      navbarContainer.classList.contains("hidden")
              ) {
                navbarContainer.classList.remove("hidden");
              }
              lastScroll = currentScroll;
            },
            false
    );
  }
        
    document.addEventListener('DOMContentLoaded', () => {
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('navLinks');

        if (hamburger) {
            hamburger.addEventListener('click', () => {
                navLinks.classList.toggle('active');
            });
        }

        const dropdowns = document.querySelectorAll('.dropdown');
        dropdowns.forEach(dropdown => {
            dropdown.addEventListener('click', function(event) {
                this.classList.toggle('active');
            });
        });

        document.addEventListener('click', function(event) {
            dropdowns.forEach(dropdown => {
                if (!dropdown.contains(event.target)) {
                    dropdown.classList.remove('active');
                }
            });
        });

        const openLoginPopupBtn = document.getElementById('openLoginPopup');
        const loginPopup = document.getElementById('loginPopup');
        const closeLoginPopupBtn = document.getElementById('closePopup');
        const loginOverlay = document.getElementById('loginOverlay');
        const loginTabs = loginPopup.querySelectorAll('.login-tab');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const loginButton = document.getElementById('login-btn');
        const registerButton = registerForm.querySelector('button[type="submit"]');

        function openLoginPopup() {
            loginPopup.classList.add('active');
            loginOverlay.classList.add('active');
            document.body.classList.add('no-scroll');
        }

        function closeLoginPopup() {
            loginPopup.classList.remove('active');
            loginOverlay.classList.remove('active');
            document.body.classList.remove('no-scroll');
        }

        if (loginButton) {
            loginButton.addEventListener('click', openLoginPopup);
        }
        if (closeLoginPopupBtn) {
            closeLoginPopupBtn.addEventListener('click', closeLoginPopup);
        }
        if (loginOverlay) {
            loginOverlay.addEventListener('click', closeLoginPopup);
        }

        loginTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                loginTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                if (tab.dataset.tab === 'login') {
                    loginForm.classList.add('active');
                    registerForm.classList.remove('active');
                } else {
                    registerForm.classList.add('active');
                    loginForm.classList.remove('active');
                }
            });
        });

        if (loginForm) {
            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(loginForm);
                const data = Object.fromEntries(formData.entries());
                const originalButtonText = loginForm.querySelector('button[type="submit"]').innerHTML;
                loginForm.querySelector('button[type="submit"]').disabled = true;
                loginForm.querySelector('button[type="submit"]').innerHTML = 'Caricamento...';

                try {
                    const response = await fetch('/api/login', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    const result = await response.json();
                    if (result.success) {
                        alert(result.message || "Accesso effettuato con successo!");
                        closeLoginPopup();
                    } else {
                        alert("Errore Login: " + (result.message || "Credenziali non valide."));
                    }
                } catch (error) {
                    alert("Errore durante il login: " + error.message);
                    console.error("Dettaglio errore login:", error);
                } finally {
                    loginForm.querySelector('button[type="submit"]').disabled = false;
                    loginForm.querySelector('button[type="submit"]').innerHTML = originalButtonText;
                }
            });
        }

        if (registerForm) {
            registerForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(registerForm);
                const data = Object.fromEntries(formData.entries());
                const originalButtonText = registerButton.innerHTML;
                registerButton.disabled = true;
                registerButton.innerHTML = 'Registrazione...';

                try {
                    const response = await fetch('/api/register', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    const result = await response.json();

                    if (result.success) {
                        alert(result.message || "Registrazione completata con successo!");
                        closeLoginPopup();
                    } else {
                        alert("Errore Registrazione: " + (result.message || "Si √® verificato un errore."));
                    }
                } catch (error) {
                    alert("Errore durante la registrazione: " + error.message);
                    console.error("Dettaglio errore registrazione:", error);
                } finally {
                    registerButton.disabled = false;
                    registerButton.innerHTML = originalButtonText;
                }
            });
        }

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && loginPopup.classList.contains('active')) {
                closeLoginPopup();
            }
        });

        const currentYearSpan = document.querySelector("footer p span");
            if (currentYearSpan) {
                currentYearSpan.textContent = new Date().getFullYear();
            }
    });
    </script>
</body>
</html>