<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Termini e Condizioni - Eremo Frate Francesco</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="navbar-container" id="navbarContainer">
        <nav class="navbar">
            <div class="logo">
                <a href="index.html"><span class="emoji">üèîÔ∏è</span><h2>Eremo Frate Francesco</h2></a>
            </div>
            <div class="menu">
                <a href="eventiincorso.html">Calendario attivit√†</a>
                <a href="eventipassati.html">Archivio attivit√†</a><span class="separator">|</span>
                <a href="incontrisullaparola.html">Incontri sulla parola</a><span class="separator">|</span>
                <a href="dovesiamo.html">Dove siamo</a>
                <a href="contatti.html">Contatti</a>
            </div>
            <div class="right-menu">
                <button id="login-btn" class="login-btn">Accedi</button>
                <button class="hamburger" onclick="toggleMobileMenu()" aria-label="Toggle menu">‚ò∞</button>
            </div>
        </nav>
        <div class="mobile-menu" id="mobileMenu">
            <a href="eventiincorso.html" onclick="closeMobileMenu()">Calendario attivit√†</a>
            <a href="eventipassati.html" onclick="closeMobileMenu()">Archivio attivit√†</a>
            <a href="incontrisullaparola.html" onclick="closeMobileMenu()">Incontri sulla parola</a>
            <a href="dovesiamo.html" onclick="openLoginPopup(); closeMobileMenu();">Accedi</a>
        </div>
    </header>
    <main>
        <div class="container section-padding pb-0">
            <h1>Termini e Condizioni</h1>
        </div>

        <div class="container section-padding pt-0 text-content-centered">
            <h2>Premessa</h2>
            <p>Benvenuti su Eremo Frate Francesco. L'accesso e l'utilizzo del nostro sito web sono regolati dai seguenti Termini e Condizioni. L'utilizzo del sito implica l'accettazione completa di tutte le clausole qui riportate.</p>
            <h2>Accettazione dei Termini</h2>
            <p>Accedendo o utilizzando il sito web dell'Eremo Frate Francesco, l'utente dichiara di aver letto, compreso e accettato di essere vincolato da questi Termini e Condizioni, inclusa la nostra <a href="privacy.html">Informativa sulla Privacy</a>. Se non si accettano questi termini, si prega di non utilizzare il nostro sito.</p>

            <h2>Modifiche ai Termini</h2>
            <p>L'Eremo Frate Francesco si riserva il diritto di modificare o aggiornare questi Termini e Condizioni in qualsiasi momento e senza preavviso. √à responsabilit√† dell'utente rivedere periodicamente questa pagina per essere a conoscenza di eventuali modifiche. L'uso continuato del sito dopo la pubblicazione delle modifiche costituir√† l'accettazione delle stesse.</p>

            <h2>Uso del Sito</h2>
            <ul>
                <li>Il sito √® destinato a scopi informativi e di interazione con la comunit√† dell'Eremo Frate Francesco.</li>
                <li>√à vietato utilizzare il sito per scopi illegali o non autorizzati.</li>
                <li>L'utente si impegna a non interrompere o interferire con la sicurezza o l'utilizzo del sito o di qualsiasi servizio, risorsa di sistema, account, server o rete connessi o accessibili attraverso il sito.</li>
            </ul>

            <h2>Registrazione e Account Utente</h2>
            <p>Alcune sezioni del sito potrebbero richiedere la registrazione di un account. L'utente √® responsabile della protezione della propria password e delle attivit√† svolte sotto il proprio account. Ci si impegna a fornire informazioni accurate e complete al momento della registrazione e ad aggiornarle tempestivamente.</p>

            <h2>Contenuti del Sito</h2>
            <p>Tutti i contenuti presenti sul sito, inclusi testi, immagini, grafici, loghi, icone, clip audio e video, sono di propriet√† dell'Eremo Frate Francesco o dei suoi licenziatari e sono protetti dalle leggi sul copyright. Non √® consentito copiare, riprodurre, distribuire, pubblicare o creare opere derivate senza previa autorizzazione scritta.</p>

            <h2>Limitazione di Responsabilit√†</h2>
            <p>Il sito e i suoi contenuti sono forniti "cos√¨ come sono" senza garanzie di alcun tipo, esplicite o implicite. L'Eremo Frate Francesco non garantisce che il sito sar√† ininterrotto, privo di errori o che i difetti verranno corretti. Non saremo responsabili per eventuali danni diretti, indiretti, incidentali, consequenziali o punitivi derivanti dall'uso o dall'impossibilit√† di usare il sito.</p>

            <h2>Link a Siti di Terze Parti</h2>
            <p>Il sito potrebbe contenere link a siti web di terze parti. Questi link sono forniti solo per comodit√†. L'Eremo Frate Francesco non ha controllo su tali siti e non √® responsabile per i loro contenuti o per qualsiasi danno o perdita derivante dal loro utilizzo.</p>

            <h2>Legge Applicabile e Foro Competente</h2>
            <p>Questi Termini e Condizioni sono regolati e interpretati in conformit√† con le leggi italiane. Qualsiasi controversia derivante da questi Termini e Condizioni sar√† soggetta alla giurisdizione esclusiva dei tribunali di Roma.</p>

            <h2>Contatti</h2>
            <p>Per qualsiasi domanda o chiarimento riguardo a questi Termini e Condizioni, vi preghiamo di contattarci tramite la sezione <a href="contatti.html">Contatti</a> del nostro sito.</p>
        </div>
    </main>

    <div class="login-popup-overlay" id="loginOverlay"></div>
    <div class="login-popup" id="loginPopup">
        <button class="close-popup" id="closePopup" aria-label="Chiudi popup">&times;</button>
        <div class="login-tabs">
            <div class="login-tab active" data-tab="login">Accedi</div>
            <div class="login-tab" data-tab="register">Registrati</div>
        </div>
        <form class="login-form active" id="loginForm" method="POST"> <div class="form-group mb-3">
            <label for="login-email">Email</label>
            <input type="email" id="login-email" name="login-email" class="form-control" required autocomplete="email"> </div>
            <div class="form-group mb-3">
                <label for="login-password">Password</label>
                <input type="password" id="login-password" name="login-password" class="form-control" required autocomplete="current-password"> </div>
            <div class="form-actions">
                <button type="submit" class="btn-popup">Accedi</button>
            </div>
        </form>
        <form class="login-form" id="registerForm" method="POST">
            <div class="form-group mb-3">
                <label for="register-name">Nome</label>
                <input type="text" id="register-name" name="register-name" class="form-control" required autocomplete="given-name"> </div>
            <div class="form-group mb-3">
                <label for="register-surname">Cognome</label>
                <input type="text" id="register-surname" name="register-surname" class="form-control" required autocomplete="family-name"> </div>
            <div class="form-group mb-3">
                <label for="register-email">Email</label>
                <input type="email" id="register-email" name="register-email" class="form-control" required autocomplete="email"> </div>
            <div class="form-group mb-3">
                <label for="register-password">Password</label>
                <input type="password" id="register-password" name="register-password" class="form-control" required minlength="8" autocomplete="new-password"> <small>Minimo 8 caratteri.</small>
            </div>
            <div class="terms-checkbox mb-3">
                <input type="checkbox" id="register-terms" name="register-terms" required> <label for="register-terms">Accetto i <a href="/termini" target="_blank">termini e condizioni</a></label>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-popup">Registrati</button>
            </div>
        </form>
    </div>

    <footer>
        <p>¬© <span id="currentYear"></span> Eremo Frate Francesco. Tutti i diritti riservati. Via della Spiritualit√† 123, Nembro (BG) - Italia</p>
    </footer>

    <script src="js/script.js"></script>
    <script src="js/login.js"></script>
    <script>

  // --- Navbar Scroll Logic ---
  let lastScroll = 0;
  const navbarContainer = document.getElementById("navbarContainer");
  if (navbarContainer) { // Aggiunto controllo
    window.addEventListener(
            "scroll",
            function () {
              const currentScroll =
                      window.pageYOffset || document.documentElement.scrollTop;
              if (currentScroll <= 50) {
                navbarContainer.classList.remove("hidden");
                lastScroll = 0;
                return;
              }
              if (
                      currentScroll > lastScroll &&
                      !navbarContainer.classList.contains("hidden")
              ) {
                navbarContainer.classList.add("hidden");
              } else if (
                      currentScroll < lastScroll &&
                      navbarContainer.classList.contains("hidden")
              ) {
                navbarContainer.classList.remove("hidden");
              }
              lastScroll = currentScroll;
            },
            false
    );
  }
        
    document.addEventListener('DOMContentLoaded', () => {
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('navLinks');

        if (hamburger) {
            hamburger.addEventListener('click', () => {
                navLinks.classList.toggle('active');
            });
        }

        const dropdowns = document.querySelectorAll('.dropdown');
        dropdowns.forEach(dropdown => {
            dropdown.addEventListener('click', function(event) {
                this.classList.toggle('active');
            });
        });

        document.addEventListener('click', function(event) {
            dropdowns.forEach(dropdown => {
                if (!dropdown.contains(event.target)) {
                    dropdown.classList.remove('active');
                }
            });
        });

        const openLoginPopupBtn = document.getElementById('openLoginPopup');
        const loginPopup = document.getElementById('loginPopup');
        const closeLoginPopupBtn = document.getElementById('closePopup');
        const loginOverlay = document.getElementById('loginOverlay');
        const loginTabs = loginPopup.querySelectorAll('.login-tab');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const loginButton = document.getElementById('login-btn');
        const registerButton = registerForm.querySelector('button[type="submit"]');

        function openLoginPopup() {
            loginPopup.classList.add('active');
            loginOverlay.classList.add('active');
            document.body.classList.add('no-scroll');
        }

        function closeLoginPopup() {
            loginPopup.classList.remove('active');
            loginOverlay.classList.remove('active');
            document.body.classList.remove('no-scroll');
        }

        if (loginButton) {
            loginButton.addEventListener('click', openLoginPopup);
        }
        if (closeLoginPopupBtn) {
            closeLoginPopupBtn.addEventListener('click', closeLoginPopup);
        }
        if (loginOverlay) {
            loginOverlay.addEventListener('click', closeLoginPopup);
        }

        loginTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                loginTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                if (tab.dataset.tab === 'login') {
                    loginForm.classList.add('active');
                    registerForm.classList.remove('active');
                } else {
                    registerForm.classList.add('active');
                    loginForm.classList.remove('active');
                }
            });
        });

        if (loginForm) {
            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(loginForm);
                const data = Object.fromEntries(formData.entries());
                const originalButtonText = loginForm.querySelector('button[type="submit"]').innerHTML;
                loginForm.querySelector('button[type="submit"]').disabled = true;
                loginForm.querySelector('button[type="submit"]').innerHTML = 'Caricamento...';

                try {
                    const response = await fetch('/api/login', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    const result = await response.json();
                    if (result.success) {
                        alert(result.message || "Accesso effettuato con successo!");
                        closeLoginPopup();
                    } else {
                        alert("Errore Login: " + (result.message || "Credenziali non valide."));
                    }
                } catch (error) {
                    alert("Errore durante il login: " + error.message);
                    console.error("Dettaglio errore login:", error);
                } finally {
                    loginForm.querySelector('button[type="submit"]').disabled = false;
                    loginForm.querySelector('button[type="submit"]').innerHTML = originalButtonText;
                }
            });
        }

        if (registerForm) {
            registerForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(registerForm);
                const data = Object.fromEntries(formData.entries());
                const originalButtonText = registerButton.innerHTML;
                registerButton.disabled = true;
                registerButton.innerHTML = 'Registrazione...';

                try {
                    const response = await fetch('/api/register', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    const result = await response.json();

                    if (result.success) {
                        alert(result.message || "Registrazione completata con successo!");
                        closeLoginPopup();
                    } else {
                        alert("Errore Registrazione: " + (result.message || "Si √® verificato un errore."));
                    }
                } catch (error) {
                    alert("Errore durante la registrazione: " + error.message);
                    console.error("Dettaglio errore registrazione:", error);
                } finally {
                    registerButton.disabled = false;
                    registerButton.innerHTML = originalButtonText;
                }
            });
        }

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && loginPopup.classList.contains('active')) {
                closeLoginPopup();
            }
        });

        const currentYearSpan = document.querySelector("footer p span");
            if (currentYearSpan) {
                currentYearSpan.textContent = new Date().getFullYear();
            }
    });
    </script>
</body>
</html>