<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="images/logo.png" type="image/x-icon">
    <title>Calendario Attivit√† - Eremo Frate Francesco</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="navbar-container" id="navbarContainer">
    <nav class="navbar">
        <div class="logo">
            <a href="index.html">
                <span class="emoji">üèîÔ∏è</span>
                <h2>Eremo Frate Francesco</h2>
            </a>
        </div>
        <div class="menu">
            <a href="chi-siamo.html">Chi siamo</a>
            <span class="separator">|</span>
            <a href="eventiincorso.html">Calendario attivit√†</a>
            <a href="eventipassati.html">Archivio attivit√†</a>
            <span class="separator">|</span>
            <a href="incontrisullaparola.html">Incontri sulla parola</a>
            <span class="separator">|</span>
            <a href="dovesiamo.html">Dove siamo</a>
            <a href="contatti.html">Contatti</a>
        </div>
        <div class="right-menu">
            <button id="login-btn" class="login-btn">Accedi</button>
            <button class="hamburger" onclick="toggleMobileMenu()" aria-label="Toggle menu">‚ò∞</button>
        </div>
    </nav>
    <div class="mobile-menu" id="mobileMenu">
        <a href="chi-siamo.html" onclick="closeMobileMenu()">Chi siamo</a>
        <a href="eventiincorso.html" onclick="closeMobileMenu()">Calendario attivit√†</a>
        <a href="eventipassati.html" onclick="closeMobileMenu()">Archivio attivit√†</a>
        <a href="incontrisullaparola.html" onclick="closeMobileMenu()">Incontri sulla parola</a>
        <a href="dovesiamo.html" onclick="closeMobileMenu()">Dove siamo</a>
        <a href="contatti.html" onclick="closeMobileMenu()">Contatti</a>
        <a href="#" id="login-btn-mobile" onclick="openLoginPopup(); closeMobileMenu();">Accedi</a>
    </div>
</header>

<main>
    <div class="container section-padding">
        <h1 class="text-center mb-4">Calendario Attivit√†</h1>

        <div class="card-grid" id="eventiGrid">
            <article class="card">
                <div class="card-image-container">
                    <img src="https://picsum.photos/400/250?random=meditation,spirituality" alt="Meditazione profonda" class="card-image">
                </div>
                <div class="card-content">
                    <h3>Ritiro di Meditazione Profonda</h3>
                    <p class="card-info">
                        <b>Data:</b> 15-17 Maggio 2025 <br>
                        <b>Relatore:</b> Fra' Elia <br>
                        <b>Orario:</b> Dalle 18:00 del 15
                    </p>
                    <p>Un weekend immersivo per esplorare tecniche meditative e ritrovare la calma interiore.</p>
                    <p class="card-info"><b>Posti Disponibili:</b> <span class="posti-disponibili">12</span></p>
                    <div class="card-actions">
                        <a href="evento.html?id=1" class="card-btn card-btn-secondary">Dettagli</a>
                        <button class="card-btn card-btn-primary btn-prenota-rapido" data-event-id="1">Prenota</button>
                    </div>
                </div>
            </article>

            <article class="card">
                <div class="card-image-container">
                    <img src="https://picsum.photos/400/250?random=scripture,study" alt="Studio della parola" class="card-image">
                </div>
                <div class="card-content">
                    <h3>Incontro sulla Parola: Il Vangelo di Marco</h3>
                    <p class="card-info">
                        <b>Data:</b> Ogni Gioved√¨ di Maggio 2025 <br>
                        <b>Relatore:</b> Sorella Chiara <br>
                        <b>Orario:</b> 20:30 - 22:00
                    </p>
                    <p>Approfondimento settimanale del Vangelo di Marco, aperto a tutti.</p>
                    <p class="card-info"><b>Posti Disponibili:</b> <span class="posti-disponibili">30</span></p>
                    <div class="card-actions">
                        <a href="evento.html?id=2" class="card-btn card-btn-secondary">Dettagli</a>
                        <button class="card-btn card-btn-primary btn-prenota-rapido" data-event-id="2">Prenota</button>
                    </div>
                </div>
            </article>

            <article class="card">
                <div class="card-image-container">
                    <img src="https://picsum.photos/400/250?random=nature,walk" alt="Camminata contemplativa" class="card-image">
                </div>
                <div class="card-content">
                    <h3>Camminata Contemplativa nel Bosco</h3>
                    <p class="card-info">
                        <b>Data:</b> 24 Maggio 2025 <br>
                        <b>Guida:</b> Antonio Verdi <br>
                        <b>Orario:</b> 09:00 - 13:00
                    </p>
                    <p>Un percorso guidato nei sentieri dell'Eremo, unendo movimento e riflessione.</p>
                    <p class="card-info"><b>Posti Disponibili:</b> <span class="posti-disponibili">8</span></p>
                    <div class="card-actions">
                        <a href="evento.html?id=3" class="card-btn card-btn-secondary">Dettagli</a>
                        <button class="card-btn card-btn-primary btn-prenota-rapido" data-event-id="3">Prenota</button>
                    </div>
                </div>
            </article>

        </div>

    </div>
</main>

<div class="login-popup-overlay" id="loginOverlay"></div>
<div class="login-popup" id="loginPopup">
    <button class="close-popup" id="closePopup" aria-label="Chiudi popup">&times;</button>
    <div class="login-tabs">
        <div class="login-tab active" data-tab="login">Accedi</div>
        <div class="login-tab" data-tab="register">Registrati</div>
    </div>
    <form class="login-form active" id="loginForm">
        <div class="form-group mb-3">
            <label for="login-email">Email</label>
            <input type="email" id="login-email-popup" class="form-control" required>
        </div>
        <div class="form-group mb-3">
            <label for="login-password">Password</label>
            <input type="password" id="login-password-popup" class="form-control" required>
        </div>
        <div class="form-actions">
            <button type="submit" class="btn-popup">Accedi</button>
        </div>
    </form>
    <form class="login-form" id="registerForm">
        <div class="form-actions">
            <button type="submit" class="btn-popup">Registrati</button>
        </div>
    </form>
</div>

<footer>
    <p>&copy; 2025 Eremo Frate Francesco. Tutti i diritti riservati. Via della Spiritualit√† 123, Nembro (BG) - Italia</p>
</footer>

<script>
    // --- Navbar & Mobile Menu Logic (come index.html) ---
    // ... (includere lo script completo) ...
    let lastScroll = 0;
    const navbarContainer = document.getElementById('navbarContainer');
    window.addEventListener('scroll', function() { /* ... */ });
    const mobileMenu = document.getElementById("mobileMenu");
    const hamburger = document.querySelector(".hamburger");
    function toggleMobileMenu() { /* ... */ }
    function closeMobileMenu() { /* ... */ }

    // --- Login Popup Logic (come index.html) ---
    const loginBtn = document.getElementById('login-btn');
    // ... (includere lo script completo del popup) ...
    function openLoginPopup() { /* ... */ }
    function closeLoginPopup() { /* ... */ }
    // ... event listeners popup ...


    // --- Logica specifica pagina Eventi ---

    // Esempio: Gestione prenotazione rapida (richiede login)
    document.querySelectorAll('.btn-prenota-rapido').forEach(button => {
        button.addEventListener('click', function() {
            const eventId = this.getAttribute('data-event-id');
            // 1. Controlla se l'utente √® loggato (es. check cookie/localStorage)
            const isLoggedIn = false; // Mettere qui la logica di controllo login

            if (isLoggedIn) {
                // 2. Se loggato, procedi con la prenotazione (simulata)
                console.log(`Tentativo prenotazione evento ${eventId}`);
                this.textContent = 'Prenotato!';
                this.disabled = true;
                // Qui aggiungere chiamata API reale per prenotare
                alert(`Prenotazione per evento ${eventId} effettuata (simulato).`);
            } else {
                // 3. Se non loggato, apri il popup di login
                openLoginPopup();
                // Potresti voler salvare l'ID evento per completare la prenotazione dopo il login
                localStorage.setItem('pending_booking_event_id', eventId);
            }
        });
    });

    // Esempio: dopo il login/registrazione dal popup, controlla se c'era una prenotazione in sospeso
    document.getElementById('loginForm')?.addEventListener('submit', (e) => {
        e.preventDefault();
        // ... logica login ...
        const pendingEventId = localStorage.getItem('pending_booking_event_id');
        if (pendingEventId) {
            alert(`Login effettuato. Completa prenotazione per evento ${pendingEventId}?`);
            // Qui logica per completare la prenotazione
            localStorage.removeItem('pending_booking_event_id');
        }
        closeLoginPopup();
    });
    document.getElementById('registerForm')?.addEventListener('submit', (e) => {
        // ... logica registrazione ...
        // Simile al login, controlla pendingEventId
    });

</script>

</body>
</html>